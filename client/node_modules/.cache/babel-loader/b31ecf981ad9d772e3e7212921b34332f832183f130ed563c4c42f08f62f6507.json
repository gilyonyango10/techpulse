{"ast":null,"code":"import React,{useState}from'react';import{Link}from'react-router-dom';import{useAuth}from'../contexts/AuthContext';import OTPVerification from'../components/OTPVerification';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Register=()=>{const[formData,setFormData]=useState({fullName:'',email:'',phoneNumber:'',password:'',confirmPassword:''});const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[fieldErrors,setFieldErrors]=useState({});const[showOTPVerification,setShowOTPVerification]=useState(false);const[registrationData,setRegistrationData]=useState(null);const{register,login}=useAuth();const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});// Clear errors when user starts typing\nif(error)setError('');if(fieldErrors[e.target.name]){setFieldErrors({...fieldErrors,[e.target.name]:''});}};const validateForm=()=>{const errors={};if(formData.fullName.trim().length<2){errors.fullName='Full name must be at least 2 characters';}if(!formData.email.includes('@')){errors.email='Please enter a valid email address';}if(formData.phoneNumber.length<10){errors.phoneNumber='Please enter a valid phone number';}if(formData.password.length<6){errors.password='Password must be at least 6 characters';}if(formData.password!==formData.confirmPassword){errors.confirmPassword='Passwords do not match';}return errors;};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError('');setFieldErrors({});// Client-side validation\nconst validationErrors=validateForm();if(Object.keys(validationErrors).length>0){setFieldErrors(validationErrors);setLoading(false);return;}try{// Step 1: Initial registration (sends OTP)\nconst response=await fetch('/api/auth/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({fullName:formData.fullName,email:formData.email,phoneNumber:formData.phoneNumber,password:formData.password})});const result=await response.json();if(result.success){// Registration initiated, show OTP verification\nsetRegistrationData({phoneNumber:result.data.phoneNumber,userId:result.data.userId});setShowOTPVerification(true);}else{setError(result.message);// Handle field-specific errors from server\nif(result.errors&&Array.isArray(result.errors)){const serverFieldErrors={};result.errors.forEach(error=>{serverFieldErrors[error.field]=error.message;});setFieldErrors(serverFieldErrors);}}}catch(error){setError('Network error. Please try again.');}setLoading(false);};// Handle OTP verification success\nconst handleOTPVerified=async otpResult=>{try{// Step 2: Complete registration with OTP verification\nconst response=await fetch('/api/auth/verify-registration',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({phoneNumber:registrationData.phoneNumber,otp:otpResult.otp})});const result=await response.json();if(result.success){// Registration completed, log the user in\nlogin(result.data.token,result.data.user);}else{setError(result.message);setShowOTPVerification(false);}}catch(error){setError('Network error during verification. Please try again.');setShowOTPVerification(false);}};// Handle OTP verification cancel\nconst handleOTPCancel=()=>{setShowOTPVerification(false);setRegistrationData(null);setError('Registration cancelled. Please try again.');};// Show OTP verification if registration initiated\nif(showOTPVerification&&registrationData){return/*#__PURE__*/_jsx(OTPVerification,{phoneNumber:registrationData.phoneNumber,purpose:\"registration\",onVerified:handleOTPVerified,onCancel:handleOTPCancel});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-primary-600 text-white p-3 rounded-full\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-8 h-8\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"})})})}),/*#__PURE__*/_jsx(\"h2\",{className:\"mt-6 text-center text-3xl font-extrabold text-gray-900\",children:\"Create your account\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2 text-center text-sm text-gray-600\",children:[\"Or\",' ',/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"font-medium text-primary-600 hover:text-primary-500\",children:\"sign in to your existing account\"})]})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"mt-8 space-y-6\",onSubmit:handleSubmit,children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert-error\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 text-danger-400\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",clipRule:\"evenodd\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-3\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:error})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fullName\",className:\"block text-sm font-medium text-gray-700\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{id:\"fullName\",name:\"fullName\",type:\"text\",autoComplete:\"name\",required:true,className:`input-field mt-1 ${fieldErrors.fullName?'border-danger-500':''}`,placeholder:\"Enter your full name\",value:formData.fullName,onChange:handleChange}),fieldErrors.fullName&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-danger-600\",children:fieldErrors.fullName})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block text-sm font-medium text-gray-700\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",name:\"email\",type:\"email\",autoComplete:\"email\",required:true,className:`input-field mt-1 ${fieldErrors.email?'border-danger-500':''}`,placeholder:\"Enter your email\",value:formData.email,onChange:handleChange}),fieldErrors.email&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-danger-600\",children:fieldErrors.email})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phoneNumber\",className:\"block text-sm font-medium text-gray-700\",children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"input\",{id:\"phoneNumber\",name:\"phoneNumber\",type:\"tel\",autoComplete:\"tel\",required:true,className:`input-field mt-1 ${fieldErrors.phoneNumber?'border-danger-500':''}`,placeholder:\"Enter your phone number\",value:formData.phoneNumber,onChange:handleChange}),fieldErrors.phoneNumber&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-danger-600\",children:fieldErrors.phoneNumber})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-sm font-medium text-gray-700\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",name:\"password\",type:\"password\",autoComplete:\"new-password\",required:true,className:`input-field mt-1 ${fieldErrors.password?'border-danger-500':''}`,placeholder:\"Enter your password\",value:formData.password,onChange:handleChange}),fieldErrors.password&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-danger-600\",children:fieldErrors.password})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmPassword\",className:\"block text-sm font-medium text-gray-700\",children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{id:\"confirmPassword\",name:\"confirmPassword\",type:\"password\",autoComplete:\"new-password\",required:true,className:`input-field mt-1 ${fieldErrors.confirmPassword?'border-danger-500':''}`,placeholder:\"Confirm your password\",value:formData.confirmPassword,onChange:handleChange}),fieldErrors.confirmPassword&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-danger-600\",children:fieldErrors.confirmPassword})]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\",children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}),\"Creating account...\"]}):'Create account'})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"Already have an account?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"font-medium text-primary-600 hover:text-primary-500\",children:\"Sign in here\"})]})})]})]})});};export default Register;","map":{"version":3,"names":["React","useState","Link","useAuth","OTPVerification","jsx","_jsx","jsxs","_jsxs","Register","formData","setFormData","fullName","email","phoneNumber","password","confirmPassword","loading","setLoading","error","setError","fieldErrors","setFieldErrors","showOTPVerification","setShowOTPVerification","registrationData","setRegistrationData","register","login","handleChange","e","target","name","value","validateForm","errors","trim","length","includes","handleSubmit","preventDefault","validationErrors","Object","keys","response","fetch","method","headers","body","JSON","stringify","result","json","success","data","userId","message","Array","isArray","serverFieldErrors","forEach","field","handleOTPVerified","otpResult","otp","token","user","handleOTPCancel","purpose","onVerified","onCancel","className","children","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","to","onSubmit","fillRule","clipRule","htmlFor","id","type","autoComplete","required","placeholder","onChange","disabled","xmlns","cx","cy","r"],"sources":["/home/maytor/Documents/kaba/text pulse/client/src/pages/Register.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport OTPVerification from '../components/OTPVerification';\n\nconst Register = () => {\n  const [formData, setFormData] = useState({\n    fullName: '',\n    email: '',\n    phoneNumber: '',\n    password: '',\n    confirmPassword: ''\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [fieldErrors, setFieldErrors] = useState({});\n  const [showOTPVerification, setShowOTPVerification] = useState(false);\n  const [registrationData, setRegistrationData] = useState(null);\n\n  const { register, login } = useAuth();\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n    // Clear errors when user starts typing\n    if (error) setError('');\n    if (fieldErrors[e.target.name]) {\n      setFieldErrors({\n        ...fieldErrors,\n        [e.target.name]: ''\n      });\n    }\n  };\n\n  const validateForm = () => {\n    const errors = {};\n\n    if (formData.fullName.trim().length < 2) {\n      errors.fullName = 'Full name must be at least 2 characters';\n    }\n\n    if (!formData.email.includes('@')) {\n      errors.email = 'Please enter a valid email address';\n    }\n\n    if (formData.phoneNumber.length < 10) {\n      errors.phoneNumber = 'Please enter a valid phone number';\n    }\n\n    if (formData.password.length < 6) {\n      errors.password = 'Password must be at least 6 characters';\n    }\n\n    if (formData.password !== formData.confirmPassword) {\n      errors.confirmPassword = 'Passwords do not match';\n    }\n\n    return errors;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    setFieldErrors({});\n\n    // Client-side validation\n    const validationErrors = validateForm();\n    if (Object.keys(validationErrors).length > 0) {\n      setFieldErrors(validationErrors);\n      setLoading(false);\n      return;\n    }\n\n    try {\n      // Step 1: Initial registration (sends OTP)\n      const response = await fetch('/api/auth/register', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          fullName: formData.fullName,\n          email: formData.email,\n          phoneNumber: formData.phoneNumber,\n          password: formData.password\n        }),\n      });\n\n      const result = await response.json();\n\n      if (result.success) {\n        // Registration initiated, show OTP verification\n        setRegistrationData({\n          phoneNumber: result.data.phoneNumber,\n          userId: result.data.userId\n        });\n        setShowOTPVerification(true);\n      } else {\n        setError(result.message);\n        \n        // Handle field-specific errors from server\n        if (result.errors && Array.isArray(result.errors)) {\n          const serverFieldErrors = {};\n          result.errors.forEach(error => {\n            serverFieldErrors[error.field] = error.message;\n          });\n          setFieldErrors(serverFieldErrors);\n        }\n      }\n    } catch (error) {\n      setError('Network error. Please try again.');\n    }\n    \n    setLoading(false);\n  };\n\n  // Handle OTP verification success\n  const handleOTPVerified = async (otpResult) => {\n    try {\n      // Step 2: Complete registration with OTP verification\n      const response = await fetch('/api/auth/verify-registration', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          phoneNumber: registrationData.phoneNumber,\n          otp: otpResult.otp\n        }),\n      });\n\n      const result = await response.json();\n\n      if (result.success) {\n        // Registration completed, log the user in\n        login(result.data.token, result.data.user);\n      } else {\n        setError(result.message);\n        setShowOTPVerification(false);\n      }\n    } catch (error) {\n      setError('Network error during verification. Please try again.');\n      setShowOTPVerification(false);\n    }\n  };\n\n  // Handle OTP verification cancel\n  const handleOTPCancel = () => {\n    setShowOTPVerification(false);\n    setRegistrationData(null);\n    setError('Registration cancelled. Please try again.');\n  };\n\n  // Show OTP verification if registration initiated\n  if (showOTPVerification && registrationData) {\n    return (\n      <OTPVerification\n        phoneNumber={registrationData.phoneNumber}\n        purpose=\"registration\"\n        onVerified={handleOTPVerified}\n        onCancel={handleOTPCancel}\n      />\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"max-w-md w-full space-y-8\">\n        <div>\n          <div className=\"flex justify-center\">\n            <div className=\"bg-primary-600 text-white p-3 rounded-full\">\n              <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\n              </svg>\n            </div>\n          </div>\n          <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\n            Create your account\n          </h2>\n          <p className=\"mt-2 text-center text-sm text-gray-600\">\n            Or{' '}\n            <Link\n              to=\"/login\"\n              className=\"font-medium text-primary-600 hover:text-primary-500\"\n            >\n              sign in to your existing account\n            </Link>\n          </p>\n        </div>\n\n        <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit}>\n          {error && (\n            <div className=\"alert-error\">\n              <div className=\"flex\">\n                <div className=\"flex-shrink-0\">\n                  <svg className=\"h-5 w-5 text-danger-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                    <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n                  </svg>\n                </div>\n                <div className=\"ml-3\">\n                  <p className=\"text-sm\">{error}</p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          <div className=\"space-y-4\">\n            <div>\n              <label htmlFor=\"fullName\" className=\"block text-sm font-medium text-gray-700\">\n                Full Name\n              </label>\n              <input\n                id=\"fullName\"\n                name=\"fullName\"\n                type=\"text\"\n                autoComplete=\"name\"\n                required\n                className={`input-field mt-1 ${fieldErrors.fullName ? 'border-danger-500' : ''}`}\n                placeholder=\"Enter your full name\"\n                value={formData.fullName}\n                onChange={handleChange}\n              />\n              {fieldErrors.fullName && (\n                <p className=\"mt-1 text-sm text-danger-600\">{fieldErrors.fullName}</p>\n              )}\n            </div>\n\n            <div>\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\n                Email address\n              </label>\n              <input\n                id=\"email\"\n                name=\"email\"\n                type=\"email\"\n                autoComplete=\"email\"\n                required\n                className={`input-field mt-1 ${fieldErrors.email ? 'border-danger-500' : ''}`}\n                placeholder=\"Enter your email\"\n                value={formData.email}\n                onChange={handleChange}\n              />\n              {fieldErrors.email && (\n                <p className=\"mt-1 text-sm text-danger-600\">{fieldErrors.email}</p>\n              )}\n            </div>\n\n            <div>\n              <label htmlFor=\"phoneNumber\" className=\"block text-sm font-medium text-gray-700\">\n                Phone Number\n              </label>\n              <input\n                id=\"phoneNumber\"\n                name=\"phoneNumber\"\n                type=\"tel\"\n                autoComplete=\"tel\"\n                required\n                className={`input-field mt-1 ${fieldErrors.phoneNumber ? 'border-danger-500' : ''}`}\n                placeholder=\"Enter your phone number\"\n                value={formData.phoneNumber}\n                onChange={handleChange}\n              />\n              {fieldErrors.phoneNumber && (\n                <p className=\"mt-1 text-sm text-danger-600\">{fieldErrors.phoneNumber}</p>\n              )}\n            </div>\n\n            <div>\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">\n                Password\n              </label>\n              <input\n                id=\"password\"\n                name=\"password\"\n                type=\"password\"\n                autoComplete=\"new-password\"\n                required\n                className={`input-field mt-1 ${fieldErrors.password ? 'border-danger-500' : ''}`}\n                placeholder=\"Enter your password\"\n                value={formData.password}\n                onChange={handleChange}\n              />\n              {fieldErrors.password && (\n                <p className=\"mt-1 text-sm text-danger-600\">{fieldErrors.password}</p>\n              )}\n            </div>\n\n            <div>\n              <label htmlFor=\"confirmPassword\" className=\"block text-sm font-medium text-gray-700\">\n                Confirm Password\n              </label>\n              <input\n                id=\"confirmPassword\"\n                name=\"confirmPassword\"\n                type=\"password\"\n                autoComplete=\"new-password\"\n                required\n                className={`input-field mt-1 ${fieldErrors.confirmPassword ? 'border-danger-500' : ''}`}\n                placeholder=\"Confirm your password\"\n                value={formData.confirmPassword}\n                onChange={handleChange}\n              />\n              {fieldErrors.confirmPassword && (\n                <p className=\"mt-1 text-sm text-danger-600\">{fieldErrors.confirmPassword}</p>\n              )}\n            </div>\n          </div>\n\n          <div>\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {loading ? (\n                <div className=\"flex items-center\">\n                  <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                  </svg>\n                  Creating account...\n                </div>\n              ) : (\n                'Create account'\n              )}\n            </button>\n          </div>\n\n          <div className=\"text-center\">\n            <p className=\"text-sm text-gray-600\">\n              Already have an account?{' '}\n              <Link\n                to=\"/login\"\n                className=\"font-medium text-primary-600 hover:text-primary-500\"\n              >\n                Sign in here\n              </Link>\n            </p>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default Register;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}